// بسيط وواضح: تنقل الهامبرغر + عمل الاختبار
document.addEventListener('DOMContentLoaded', function () {
  const menuBtn = document.getElementById('menuBtn');
  const siteNav = document.getElementById('siteNav');

  menuBtn && menuBtn.addEventListener('click', () => {
    if (siteNav.style.display === 'block') {
      siteNav.style.display = '';
    } else {
      siteNav.style.display = 'block';
    }
  });

  // اختبارات: الإجابات الصحيحة
  const answers = {
    q1: 'c', // !G7#xP9@kL
    q2: 'b', // تحقق من المصدر
    q3: 'a'  // رقم الجوال الخاص بك (يُعد حسّاساً)
  };

  const submitBtn = document.getElementById('submitQuiz');
  const quizForm = document.getElementById('quizForm');
  const quizResult = document.getElementById('quizResult');
  const scoreText = document.getElementById('scoreText');
  const showAnswersBtn = document.getElementById('showAnswers');

  submitBtn && submitBtn.addEventListener('click', () => {
    let score = 0;
    const total = Object.keys(answers).length;
    for (const q of Object.keys(answers)) {
      const val = quizForm.querySelector(`[name="${q}"]:checked`);
      if (val && val.value === answers[q]) score++;
    }
    quizResult.hidden = false;
    scoreText.textContent = `نتيجتك: ${score} من ${total} — ${feedback(score, total)}`;
    // حفظ النتيجة مؤقتاً في sessionStorage (اختياري)
    if (window.sessionStorage) {
      sessionStorage.setItem('digitalSafetyScore', `${score}/${total}`);
    }
  });

  showAnswersBtn && showAnswersBtn.addEventListener('click', () => {
    alert('الإجابات الصحيحة:\n1) !G7#xP9@kL\n2) تتحقق من مصدره وتفحص عنوان الرابط\n3) رقم الجوال الخاص بك');
  });

  function feedback(score, total) {
    const pct = (score / total) * 100;
    if (pct === 100) return 'ممتاز — فهم تام!';
    if (pct >= 66) return 'جيد — فهم جيد، راجع نقاط بسيطة.';
    if (pct >= 33) return 'متوسط — احتاج لمراجعة أكبر.';
    return 'ضعيف — يحتاج مراجعة وممارسة.';
  }
});